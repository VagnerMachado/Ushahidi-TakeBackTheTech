package edu.ncc.machado.ushahidi;

import android.os.AsyncTask;
import android.support.v4.app.FragmentActivity;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.OnMapReadyCallback;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

/***************************************************************************************************
 ****** This is the Project 2 for the Mobile application Course in Nassau Community College  *******
 *
 * This application uses Ushahidi Deployments and an API call to TakeBackTheTeck.net to retrieve and
 * parse incident data. A Splash layout provides the user with a brief description of the app and
 * its purpose. A GoogleMap Fragment is then loaded with markers based on each incidents'
 * location. Upon being clicked, each markers shows a title and snippet with data for each incident.
 * The detailed description for each class and method used can be found in their Javadoc comments
 *
 * ***********************  Vagner Machado - Fall 2016 - N00820127  ********************************
 **************************************************************************************************/



/**
 * MapsActivity Class - extends Fragment Activity and OnMapReady call back to support a map in
 * the UI. This map will contain markers with information collected through an API call to
 * takebackthetech.net. That information is retrieved in the private Class GetLocations
 * which extends AsyncTask. Information for each method used in this app can be seen in its
 * Javadoc or above each of those methods.
 */
public class MapsActivity extends FragmentActivity implements OnMapReadyCallback {

    //class variables
    private GoogleMap mMap;
    private final String TAG = "debugging";
    private boolean infoDisplayed = false;

    @Override
    /**
     * onCreate method - here the layout and Bundle data are loaded.
     * In this application, onCreate creates the support for the Google Map Fragment that
     * is going to be used.
     * @param savedInstanceState - the Bundle data used to recreate the app after screen rotation
     */
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);

        // Obtain the SupportMapFragment and get notified when the map is ready to be used.
        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);
    }

    /**
     * onMapReady method - Manipulates the map once available.
     * This callback is triggered when the map is ready to be used.
     * This is where we can add markers or lines, add listeners or move the camera. In this case,
     * we just add a marker near Sydney, Australia.
     * If Google Play services is not installed on the device, the user will be prompted to install
     * it inside the SupportMapFragment. This method will only be triggered once the user has
     * installed Google Play services and returned to the app.
     * @param googleMap - a GoogleMap object
     */
    @Override
    public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;
        new GetLocations().execute();

        //Displays a Toast only when app is launched - not after a rotation
        if(!infoDisplayed){
            infoDisplayed = true;
            Toast toastB = Toast.makeText(getApplicationContext(), R.string.click, Toast.LENGTH_LONG);
            toastB.setGravity(0, 0, 0);
            toastB.show();
        }
    }

    /**
     * private GeoLocation Class - This class extends AsyncTask Class, and contains three
     * methods that allow the application to:
     *
     *      1- override the onPreExecute method
     *      2- get a JSONObject from takebackthetech.net API call in onPreExecute
     *      3- parse the JSONObject and assign values to variables to be used as map information
     *
     * Information for each of those three methods can be found in their Javadoc
     */
    private class GetLocations extends AsyncTask<Void, Void, Void> {
        //class variables
        String result = "";

        @Override
        /**
         * onPreExecute method -  invoked on the UI thread before the task is executed
         */
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        /**
         *  doInBackground method - This method is used to perform background computation that can take a long time.
         *  The parameters of the asynchronous task are passed to this step. The result of the
         *  computation must be returned by this step and will be passed back to onPostExecute.
         *  @param arg0 - ... especified arg0 null to be the last parameter passed for app to compile
         */
        protected Void doInBackground(Void... arg0) {
            HttpURLConnection urlConnection;
            BufferedReader reader;

            try {
                //connects to the URL with a GET request
                URL url = new URL("https://www.takebackthetech.net/mapit/api?task=incidents");
                urlConnection = (HttpURLConnection) url.openConnection();
                urlConnection.setRequestMethod("GET");
                urlConnection.connect();

                InputStream inputStream = urlConnection.getInputStream();
                if (inputStream == null) {

                    // Nothing to do.
                    return null;
                }

                //reads the information from the specified URL
                reader = new BufferedReader(new InputStreamReader(inputStream));

                String s;
                int x = 0;
                while ((s = reader.readLine()) != null) {
                    Log.d(TAG, "This is 's': " + s);
                    result += s;
                    Log.d(TAG, "This is the while loop: " + x++);
                }
            } catch (Exception e) {
                Log.i("HttpAsyncTask", "EXCEPTION: " + e.getMessage());
            }
            //debugging
            Log.i("PARSING", "Returned string: " + result);
            return null;
        }

        @Override
        /**
         * onPostExecute method - here is where the JSONObject from doInBackground is parsed and
         * assigned to variables that are going to be used to populate the Map Fragment
         * @param r - can only be null, if not null the app will not compile (says the internet!)
         */
        protected void onPostExecute(Void r) {
            super.onPostExecute(r);

            /*Professor, so here is where the problem is happening:

            - The website mapping service is offline and the incidents are not showing on them, which
                indicate they are possibly having an issue parsing data
                The website's mapping service can be seen here https://www.takebackthetech.net/mapit (currently their map is blank)
            - The data returned by the call has an 'error' flag which I think is keeping the parser from working.
                The returned data can be seen at https://www.takebackthetech.net/mapit/api?task=incidents
                and the last few lines show an error message and suggests reporting it, which I did.
            - Additionally, the object returned by the API call is not 'seen' as a JSON object by the extension on Chrome,
                which can also indicate a problem with the data returned.

            - I added the if statement below to overrides the 'result' string in case data is not retrieved from API call
                Hopefully the if statement will not interfere with the data sent back once the website's map is working. I figure
                this way you can see that my parser is working!

            */
            if (result.equals(""))
                result = "{\"payload\":{\"domain\":\"https:\\/\\/www.takebackthetech.net\\/mapit\\/\",\"incidents\":[{\"incident\":{\"incidentid\":\"698\",\"incidenttitle\":\"Pakistan: increase in Facebook  related complaints\",\"incidentdescription\":\"In Pakistan there has seen a 50 per cent spike in Facebook related complaints with most of the victims being women, authorities said today.\\n\\nWomen complain mainly because their ID's were either hacked or obscene pictures were loaded from their fake IDs. \\n\\nThe Federal investigation Agency (FIA) said there has been a phenomenal increase in cyber crime complaints and without a \\\"relevant law\\\" it is facing problems to deal with them.\\n\\n\\n\\\"In Punjab alone we received 2,100 Facebook-related complaints such as fake ID, uploading of obscene pictures, hacking of the account and threatening messages last year. We have received more than 1,600 complaints by mid of this year. Same is the situation in other stations as well,\\\" FIA Lahore Cyber Crime Wing head Shahid Hasan said.\",\"incidentdate\":\"2016-07-10 19:33:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444714\",\"locationname\":\"Lahore, Pakistan\",\"locationlatitude\":\"31.554606\",\"locationlongitude\":\"74.357158\"},\"categories\":[{\"category\":{\"id\":18,\"title\":\"Sharing  and\\/or disseminating private information\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":119,\"title\":\"Invasion of privacy\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":29,\"title\":\"Reported to police\\/state enforcement authority\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}}],\"media\":[{\"id\":3565385,\"type\":4,\"link\":\"http:\\/\\/www.business-standard.com\\/article\\/pti-stories\\/50-pc-increase-in-facebook-related-crimes-in-pak-116071000517_1.html\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"697\",\"incidenttitle\":\"Colombia: desnudo en internet provoca acci\\u00f3n de Corte Constitucional\",\"incidentdescription\":\"Luego de que un alumno publicara en internet fotos de\\nuna de sus compa\\u00f1eras desnudas, la\\nCorte Constitucional de Colombia orden\\u00f3\\na su colegio dise\\u00f1ar una pol\\u00edtica que\\nprevenga ese tipo de cyberbullying.\\n\\nUn fallo de tutela de la Corte Constitucional colombiana advierte que son los colegios los primeros llamados a prevenir actos de violencia de g\\u00e9nero de los que vienen siendo objeto muchas mujeres a trav\\u00e9s de las redes sociales, mediante la pr\\u00e1ctica del cyberbullying.\\n\\nCon una ponencia del magistrado Luis\\nErnesto Vargas, ese alto tribunal orden\\u00f3 al\\nColegio Tolimense de Ibagu\\u00e9 (Tolima)\\ndise\\u00f1ar una pol\\u00edtica escolar que permita\\ndetectar tempranamente ese tipo de\\npr\\u00e1cticas, como una forma de prevenir la\\nviolencia en las aulas. Vargas, reconocido\\npor sus posiciones liberales, fue\\nacompa\\u00f1ado en esta providencia por los\\nmagistrados Mar\\u00eda Victoria Calle y Luis\\nGuillermo Guerrero.\",\"incidentdate\":\"2016-06-29 18:11:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444713\",\"locationname\":\"Tolima, Colombia\",\"locationlatitude\":\"4.092517\",\"locationlongitude\":\"-75.154538\"},\"categories\":[{\"category\":{\"id\":14,\"title\":\"Deleting, changing or faking personal data, photos\\/videos\"}},{\"category\":{\"id\":18,\"title\":\"Sharing  and\\/or disseminating private information\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":46,\"title\":\"Other\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":29,\"title\":\"Reported to police\\/state enforcement authority\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565383,\"type\":4,\"link\":\"http:\\/\\/www.redsemlac.net\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"695\",\"incidenttitle\":\"Australian Labor Party says revenge-porn victims deserve more than complaints mechanism\",\"incidentdescription\":\"MPs from the Labor Party in Australia consider that the Turnbull Government has ignored the advice of the COAG Advisory Panel on Reducing Violence against Women and their Children led by Ken Lay and Rosie Batty.\\n\\nThe Advisory Panel\\u2019s report to COAG recommends that the Federal Government introduce strong and consistent penalties for adults who distribute private sexual material without consent.\\n\\nThe report said that the introduction of a federal offence will improve community understanding of the consequences of distributing private sexual material \\u2013 and the devastating impact it has on victims.\\n\\nA recent Senate Legal and Constitutional Affairs Committee report found overwhelming support from family violence advocates, sexual assault services and law enforcement. for the introduction of specific criminal offences criminalising \\u201crevenge porn\\u201d.\\n\\nThe report recommends new federal offences that criminalise sharing, or threatening to share, private sexual images and recordings without consent.\\n\\nThe Federal Government needs to send a clear message to the community that these behaviours are unacceptable and will not be tolerated.\\n\\nToday\\u2019s announcement by the Turnbull Government is a weak response and is in stark contrast to Labor\\u2019s decisive approach to online victimisation.\",\"incidentdate\":\"2016-06-28 18:25:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444711\",\"locationname\":\"Sydney NSW, Australia\",\"locationlatitude\":\"-33.86882\",\"locationlongitude\":\"151.209295\"},\"categories\":[{\"category\":{\"id\":18,\"title\":\"Sharing  and\\/or disseminating private information\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":46,\"title\":\"Other\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":29,\"title\":\"Reported to police\\/state enforcement authority\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}},{\"category\":{\"id\":63,\"title\":\"31-45\"}}],\"media\":[{\"id\":3565380,\"type\":4,\"link\":\"http:\\/\\/mysunshinecoast.com.au\\/news\\/news-display\\/revenge-porn-victims-deserve-more-than-a-complaints-mechanism,44481\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"696\",\"incidenttitle\":\"Pakistani trolls use Facebook to attack young students\",\"incidentdescription\":\"Last June, an eighteen-year-old student at Edwardes College, in Peshawar, Pakistan, opened an e-mail to see a picture of her face digitally superimposed on the naked body of another woman. As the student read the attached message, her dismay curdled into panic. The e-mail\\u2019s sender, who identified himself by the pseudonym Gandageer Khan, claimed to have hacked into her Facebook account. He threatened to post the photo online unless the student sent him money, in the form of a prepaid phone card, and provided him with the personal details of other female students at Edwardes. When she refused, Khan uploaded the doctored image, along with several others, to a page that he had created on Facebook titled \\u201cEdwardian Girls.\\u201d Each picture now included the student\\u2019s name, her phone number, and a lewd message: \\u201cI am available for sex. Call me for a quickie.\\u201d\\n\\nIt later transpired that the student was among fifty young women whom the people behind the Khan account\\u2014two men, one named Muhammad Ali Shah, and the other identified only as Suhail\\u2014harassed and blackmailed for a period of four years before they were arrested, last August. \\u201cThe whole of Peshawar was aware of what was happening,\\u201d Rabel Javed, another of the men\\u2019s targets, told me. \\u201cEvery time a girl would take a picture, we\\u2019d be like, \\u2018I hope Gandageer doesn\\u2019t get a hold of this.\\u2019 Every girl thought she might be next.\\u201d Although some members of Javed\\u2019s extended family blamed her for the hack, her sisters were supportive. \\u201cThey kept reminding me that none of this was my fault; it was actually this guy who was sick in the head,\\u201d she said. \\u201cI was fortunate. I come from a liberal family. Not a lot of girls are like me.\\u201d The subject of the first doctored photograph, meanwhile, claims that her father beat her for what happened, and forbade her from returning to college.\\n\\nThe students, including some sympathetic young men from Edwardes, rallied and began to petition Facebook to remove Khan\\u2019s page. \\u201cWe all just kept reporting, but nothing seemed to work,\\u201d Javed said.  The arbiters at Facebook, whose closest office to Peshawar is located more than twelve hundred miles away, in Hyderabad, India, claimed that no community standards had been breached. \\n\\n\\u201cThat\\u2019s when I understood there was a language barrier,\\u201d Javed said. \\u201cThe abusive text was written in Pashto.\\u201d After months of trying fruitlessly to persuade Facebook to take the pictures down, Javed wrote to Nighat Dad, a thirty-six-year-old Pakistani lawyer, whose organization, the Digital Rights Foundation, provides support to women who are victims of online violence. Dad\\u2019s involvement provoked prompt action. Facebook removed the images, and a spokeswoman told me that, following this incident and others like it, the company has grown to \\u201cinclude native language speakers who review content in more than three dozen languages.\\u201d Then, on August 17th, the Karachi-based Express Tribune reported that Pakistan\\u2019s Federal Investigation Agency had arrested Shah and Suhail. According to Dad, the men eventually settled out of court.\",\"incidentdate\":\"2016-06-28 18:01:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444712\",\"locationname\":\"Peshawar 25000, Pakistan\",\"locationlatitude\":\"34.014975\",\"locationlongitude\":\"71.58049\"},\"categories\":[{\"category\":{\"id\":14,\"title\":\"Deleting, changing or faking personal data, photos\\/videos\"}},{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":18,\"title\":\"Sharing  and\\/or disseminating private information\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":29,\"title\":\"Reported to police\\/state enforcement authority\"}},{\"category\":{\"id\":126,\"title\":\"Reporting abuse to provider\\/platform\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565382,\"type\":4,\"link\":\"http:\\/\\/www.newyorker.com\\/tech\\/elements\\/pakistans-troll-problem\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"694\",\"incidenttitle\":\"Espa\\u00f1a: adolescentes j\\u00f3venes pueden ser maltratadores por internet\",\"incidentdescription\":\"La profesora Mar\\u00eda Jos\\u00e9 D\\u00edaz-Aguado, catedr\\u00e1tica de Psicolog\\u00eda de la Educaci\\u00f3n de la Universidad Complutense de Madrid (UCM), ha asegurado en una entrevista a Efe que uno de cada cuatro adolescentes est\\u00e1 m\\u00e1s de tres horas diarias hablando con otra persona por internet y en ese fragmento est\\u00e1n sobrerepresentados los maltratadores.\\n\\nEstos datos se desprenden del estudio a nivel nacional, realizado por la Unidad de Psicolog\\u00eda Preventiva de la Universida Complutense de Madrid e impulsado por la Delegaci\\u00f3n del Gobierno para la Violencia de G\\u00e9nero, que se realiz\\u00f3 en los a\\u00f1os 2010 y 2013 mediante unos test an\\u00f3nimos que rellenaron en los centros escolares 19.000 j\\u00f3venes mayores de 13 a\\u00f1os.\\n\\nLos maltratadores est\\u00e1n sobrerepresentados en el grupo de los m\\u00e1s precoces, tal vez por la ansiedad que tienen de demostrar que son hombres, por carencias afectivas o, simplemente, porque no tienen adultos que los supervisen.\\n\\nEl mal uso de las nuevas tecnolog\\u00edas tambi\\u00e9n parece haber influido en la frecuencia en la que los j\\u00f3venes ven a su pareja, los que lo hacen a diario han pasado del 65 por ciento al 42 por ciento en tres a\\u00f1os y la explicaci\\u00f3n, seg\\u00fan la catedr\\u00e1tica, es que ahora establecen m\\u00e1s contacto por internet.\\n\\nEsta situaci\\u00f3n ha desembocado, posiblemente, en que los chicos insatisfechos con su relaci\\u00f3n de pareja ha aumentado del 5 por ciento al 10 por ciento, ha explicado Mar\\u00eda Jos\\u00e9 D\\u00edaz-Aguado.\\n\\nTodos estos datos revelan, en opini\\u00f3n de la profesora, que es preciso alfabetizar en el buen uso de las nuevas tecnolog\\u00eda para que los adolescentes puedan aprovechar las oportunidades que ofrecen y prevenir los riesgos.\",\"incidentdate\":\"2016-06-22 18:10:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444710\",\"locationname\":\"Madrid, Spain\",\"locationlatitude\":\"40.416775\",\"locationlongitude\":\"-3.70379\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":123,\"title\":\"Abusive comments\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":36,\"title\":\"Mobile phone\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":42,\"title\":\"Online chats (e.g. Skype, IM)\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565379,\"type\":4,\"link\":\"http:\\/\\/www.lavanguardia.com\\/vida\\/20160622\\/402687224664\\/mal-uso-de-nuevas-tecnologias-aumenta-la-violencia-machista-en-adolescentes.html\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"693\",\"incidenttitle\":\"US: Chicago DJ says police couldn't help her in cyberstalking case\",\"incidentdescription\":\"A woman DJ in the city of Chicago found out how difficult it was to denounce her case to the police and get justice after a dangerous stalker threatened her.\",\"incidentdate\":\"2016-06-14 17:30:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444709\",\"locationname\":\"Chicago, IL, USA\",\"locationlatitude\":\"41.878114\",\"locationlongitude\":\"-87.629798\"},\"categories\":[{\"category\":{\"id\":13,\"title\":\"Monitoring & tracking\"}},{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":20,\"title\":\"Physical harm\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":26,\"title\":\"Mobility limited\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":40,\"title\":\"Twitter\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":29,\"title\":\"Reported to police\\/state enforcement authority\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}}],\"media\":[{\"id\":3565378,\"type\":4,\"link\":\"http:\\/\\/myinforms.com\\/en-us\\/a\\/36388260-i-had-a-cyberstalker-and-the-police-wouldnt-help-me\\/\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"684\",\"incidenttitle\":\"Argentina: asesinan a jovencita luego de forjar amistad por Facebook\",\"incidentdescription\":\"En un crimen que ha provocado preocupaci\\u00f3n y espanto en la poblaci\\u00f3n, un ex presidiario de 26 a\\u00f1os capt\\u00f3 la amistad de una ni\\u00f1a de 12 por Facebook, haci\\u00e9ndose pasar por otra ni\\u00f1a, logrando su confianza  para combinar una salida juntas, durante la cual la golpe\\u00f3 y  asesin\\u00f3. El cuerpo de la ni\\u00f1a apareci\\u00f3 en un descampado en los alrededores de la ciudad de Bah\\u00eda Blanca, en el sur de la provincia de Buenos Aires donde viv\\u00eda. Luego de algo m\\u00e1s de un mes de b\\u00fasqueda infructuosa de sus familiares y de las fuerzas del orden la ni\\u00f1a fue encontrada oculta entre yuyales.\\n\\nEl asesino fue identificado gracias a la grabaci\\u00f3n de una videoc\\u00e1mara de seguridad en la v\\u00eda p\\u00fablica.  A las pocas horas de descubierto el cuerpo sin vida de la ni\\u00f1a  y al investigarlo, la policia descubri\\u00f3 que el hombre ten\\u00eda varios perfiles falsos en Facebook a trav\\u00e9s de los cuales se hab\\u00eda hecho amigo de numerosas ni\\u00f1as, adoptando siempre la personalidad de una jovencita, hecho que le ayudaba a  trabar amistades por la red social. \\n\\nLa fiscal a cargo del caso considera que el criminal plane\\u00f3 sus acciones para llevar enga\\u00f1ada a la ni\\u00f1a a un sitio solitario.\",\"incidentdate\":\"2016-05-30 17:48:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444700\",\"locationname\":\"Bah\\u00eda Blanca, Buenos Aires Province, Argentina\",\"locationlatitude\":\"-38.718318\",\"locationlongitude\":\"-62.266348\"},\"categories\":[{\"category\":{\"id\":13,\"title\":\"Monitoring & tracking\"}},{\"category\":{\"id\":20,\"title\":\"Physical harm\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":25,\"title\":\"Sexual harm\"}},{\"category\":{\"id\":26,\"title\":\"Mobility limited\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565368,\"type\":4,\"link\":\"http:\\/\\/www.lanacion.com.ar\\/1903803-indignacion-y-violencia-tras-el-asesinato-de-una-chica-de-12-anos-en-bahia-blanca\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"692\",\"incidenttitle\":\"Gran Breta\\u00f1a: alarma violencia contra las mujeres en redes sociales\",\"incidentdescription\":\"En el marco de la campa\\u00f1a brit\\u00e1nica antiacoso denominada \\u201cRecuperemos el Internet\\u201d, un estudio revel\\u00f3 alarmantes cifras sobre el abuso a las mujeres en las redes sociales, sobre todo en Twitter.\\n\\nDurante las 3 semanas que dur\\u00f3 el ensayo, entre fines de abril y principio de mayo, se compartieron 200.000 tuits violentos incluyendo las palabras \\u201cprostituta\\u201d y \\u201czorra\\u201d.\\n\\nHaciendo la cuentita, lo anterior equivale a unos 6,6 tuits por minuto o unos 9.500 diarios.\\n\\nLos destinatarios de tales mensajes agresivos fueron dirigidos hacia unas 80.000 personas, entre las que se encuentran celebridades de la talla de Beyonc\\u00e9, Hillary Clinton y Michelle Obama.\\n\\nLograron desarrollar el informe buscando en Twitter casos que incluyeran las palabras \\\"zorra\\\" y \\\"prostituta\\\". Luego, usaron un programa de procesamiento de lenguajes naturales (NLP) llamado \\\"Method52\\\" para determinar cu\\u00e1les de estos tuits eran bromas o \\\"de cari\\u00f1o\\\" y cu\\u00e1les eran realmente abusivos. \\n\\nLo anterior quiere decir que los tuits fueron filtrados por una herramienta automatizada y no fueron reportados manualmente por los usuarios.\\n\\nEl m\\u00e9todo reviste una gran importancia para todos aquellos usuarios v\\u00edctimas de abuso online ya que funciona de manera autom\\u00e1tica identificando posteos violentos y report\\u00e1ndolos a la autoridades de las redes sociales sin que sea necesario que los usuarios los reporten por sus propios medios.\",\"incidentdate\":\"2016-05-28 19:27:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444708\",\"locationname\":\"Great Britain, United Kingdom\",\"locationlatitude\":\"53.719028\",\"locationlongitude\":\"-2.072784\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":40,\"title\":\"Twitter\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}}],\"media\":[{\"id\":3565377,\"type\":4,\"link\":\"http:\\/\\/www.elsol.com.ar\\/nota\\/268094\\/ciencia-tecnologia\\/la-violencia-contra-la-mujer-es-realmente-intensa-y-muy-frecuente-en-twitter.html\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"691\",\"incidenttitle\":\"Brazil: mass rape video gets viral\",\"incidentdescription\":\"In Rio de Janeiro, a  video showing mass rape of a 17 year-old girl got viral in social networks and produced a country -wide scandal.\\n\\n\\u201cWhen I woke up, there were 30 guys or so on me,\\u201d says a 17-year-old girl who was the victim of a gang rape perpetrated by 33 men. \\u201cI just want to go home,\\u201d she said, after doctors examined her, and administrated a series of medications to prevent her from contracting sexually-transmitted diseases. The rapes occurred in the Western part of Rio de Janeiro on May 20, but the girl was only found five days later in the city\\u2019s center. Her identity is being withheld, for obvious reasons.\\n\\nThe gang rape itself is shocking enough, but what followed is also beyond repulsive. The rapists filmed the action and shared videos and photos of it on social media. The footage shows the teen naked and unconscious, and it is possible to hear male voices mocking her. One says: \\u201cWith more than 30, [she got] pregnant.\\u201d\\n\\nThe person who broke this piece of news is a man using the Twitter account @michelbrazil7. He wrote that \\u201cthey crushed the chick,\\u201d and \\u201cmade a tunnel out of her, more than 30.\\u201d It went viral, with hundreds of men adding on @michelbrazil7\\u2019s sexist remarks and joking about it. Some said that she had drank prior to it and must have had it coming.\\n\\nFortunately, it also drew outrage from social media users, as the Rio\\u2019s State Prosecution Office received over 800 messages denouncing what happened. Since then, @michelbrazil7\\u2019s Twitter account was closed and the man behind it was already identified by the police \\u2013 as was another man who published the video. Publishing rape scenes is a crime, and they will go to jail regardless of their participation in the actual rape. If proven so, then they will respond to this charge, too.\",\"incidentdate\":\"2016-05-27 18:34:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444707\",\"locationname\":\"Rio de Janeiro, State of Rio de Janeiro, Brazil\",\"locationlatitude\":\"-22.906847\",\"locationlongitude\":\"-43.172897\"},\"categories\":[{\"category\":{\"id\":12,\"title\":\"Taking photo\\/video without consent\"}},{\"category\":{\"id\":20,\"title\":\"Physical harm\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":40,\"title\":\"Twitter\"}},{\"category\":{\"id\":121,\"title\":\"Video\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":50,\"title\":\"A group of people\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565376,\"type\":4,\"link\":\"http:\\/\\/www.ghanagrio.com\\/news\\/261398-mass-rape-video-on-social-media-leaves-brazil-in-total-shock.html\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"690\",\"incidenttitle\":\"Brasil: aplicaci\\u00f3n alerta vs canciones con violencia machista\",\"incidentdescription\":\"El peri\\u00f3dico brasile\\u00f1o \\u00abEstad\\u00e3o\\u00bb y la agencia de publicidad FCB han lanzado la campa\\u00f1a \\u00abM\\u00fasicas de Viol\\u00eancia\\u00bb que, con la colaboraci\\u00f3n de la aplicaci\\u00f3n de m\\u00fasica Shazam, pretende sensibilizar a las mujeres sobre la violencia machista.\\n\\nLa aplicaci\\u00f3n de reconocimiento de canciones Shazam se encargar\\u00e1 de analizar las canciones y en caso de encontrar frases que hagan apolog\\u00eda de la violencia contra las mujeres, aparecer\\u00e1 una alerta que avisar\\u00e1 sobre el contenido machista de la canci\\u00f3n. Yendo m\\u00e1s lejos, la aplicacci\\u00f3n solo enviar\\u00e1 el mensaje sino que reproducir\\u00e1 el testimonio de una mujer que haya sufrido este tipo de violencia.\\n\\n\\u00abEl objetivo principal de la campa\\u00f1a es invitar a la gente a reflexionar sobre el tema a trav\\u00e9s de la m\\u00fasica que escuchan\\u00bb, ha explicado el Director Comercial de Estad\\u00e3o, Flavio Pestana. \\u00abLa violencia contra las mujeres es un delito y con esta campa\\u00f1a tenemos la oportunidad de utilizar la m\\u00fasica y la tecnolog\\u00eda para plantear la cuesti\\u00f3n sobre el tema\\u00bb ha explicado, por su parte, la CCO de FCB, Joanna Miller, seg\\u00fan recoge el diario brasile\\u00f1o \\u00abAbc\\u00bb.\\n\\nLa campa\\u00f1a ha contado hasta ahora con la participaci\\u00f3n de millones de usuarios que denuncian canciones con este tipo de contenido.\",\"incidentdate\":\"2016-05-18 18:29:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444706\",\"locationname\":\"S\\u00e3o Paulo, State of S\\u00e3o Paulo, Brazil\",\"locationlatitude\":\"-23.55052\",\"locationlongitude\":\"-46.633309\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":16,\"title\":\"Threats of violence\\/blackmail\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":122,\"title\":\"Audio\\/mp3\"}},{\"category\":{\"id\":46,\"title\":\"Other\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":50,\"title\":\"A group of people\"}}],\"media\":[{\"id\":3565375,\"type\":4,\"link\":\"http:\\/\\/www.abc.es\\/tecnologia\\/abci-shazam-detectara-canciones-hagan-apologia-violencia-machista-201605181900_noticia.html\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"689\",\"incidenttitle\":\"M\\u00e9xico: aumentan denuncias de ciberacoso contra mujeres\",\"incidentdescription\":\"Ante el aumento de las denuncias por ciberacoso, la Comisi\\u00f3n Nacional para prevenir y erradicar la Violencia contra las Mujeres (Conavim) reiter\\u00f3 las plataformas disponibles para denunciar este tipo de acoso en M\\u00e9xico.\\n\\nDentro de los datos compartidos por la Comisi\\u00f3n, este tipo violencia se refleja en insultos, comentarios degradantes, burla en los blogs y foros; el acoso en l\\u00ednea o el acecho cibern\\u00e9tico, incluyendo el env\\u00edo de amenazas a trav\\u00e9s de correo electr\\u00f3nico o tel\\u00e9fono m\\u00f3vil; el robo de identidad o datos; el espionaje; la publicaci\\u00f3n en l\\u00ednea de fotos o videos sexualmente expl\\u00edcitos sin el consentimiento de la v\\u00edctima, entre otros.\\n\\nLamentablemente los agresores en la mayor\\u00eda de los casos no son identificados plenamente, debido a que no se establece un contacto f\\u00edsico y no presenta datos reales de su ubicaci\\u00f3n.\\n\\nPor lo que la Conavim indic\\u00f3 que de reconocer una de estas situaciones, pueden reportar los contenidos directamente en las redes sociales o contactar a la Comisi\\u00f3n a trav\\u00e9s del correo conavim@segob.gob.mx o consultar el sitio e internet www.gob.mx\\/conavim.\",\"incidentdate\":\"2016-05-12 18:07:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444705\",\"locationname\":\"Tijuana, Baja California, Mexico\",\"locationlatitude\":\"32.514947\",\"locationlongitude\":\"-117.038247\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":36,\"title\":\"Mobile phone\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":40,\"title\":\"Twitter\"}},{\"category\":{\"id\":46,\"title\":\"Other\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}},{\"category\":{\"id\":63,\"title\":\"31-45\"}}],\"media\":[{\"id\":3565374,\"type\":4,\"link\":\"http:\\/\\/www.oem.com.mx\\/elsoldetijuana\\/notas\\/n4162083.htm\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"688\",\"incidenttitle\":\"M\\u00e9xico: cierran sitio web usado para extorsionar a menores\",\"incidentdescription\":\"M\\u00e1s de un centenar de jovencitas menores de edad fueron extorsionadas por los administradores de un sitio web que sub\\u00eda fotos \\u00edntimas de las adolescentes y luego ped\\u00eda dinero para retirarlas. Las denuncias llegaron a la fiscalia, que luego de una investigaci\\u00f3n logr\\u00f3 el cierre del sitio y tom\\u00f3 medidas contra sus creadores.\",\"incidentdate\":\"2016-05-08 17:27:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444704\",\"locationname\":\"Mexico City, Mexico\",\"locationlatitude\":\"19.432608\",\"locationlongitude\":\"-99.133208\"},\"categories\":[{\"category\":{\"id\":11,\"title\":\"Accessing private data\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":46,\"title\":\"Other\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":50,\"title\":\"A group of people\"}},{\"category\":{\"id\":29,\"title\":\"Reported to police\\/state enforcement authority\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565373,\"type\":4,\"link\":\"http:\\/\\/www.hidrocalidodigital.com\\/ciencia-y-tecnologia\\/articulo.php?idnota=107022\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"686\",\"incidenttitle\":\"UK: study reveals aggressive and abusive tweets sent from UK Twitter accounts\",\"incidentdescription\":\"A new Demos social media study has mapped the thousands of aggressive and abusive tweets being sent from UK Twitter accounts \\u2013 by both men and women.\\n\\nThe study, which specifically monitored the use of the words \\u2018slut\\u2019 and \\u2018whore\\u2019 by UK Twitter users over a three-week period, found 6,500 unique users were targeted by 10,000 explicitly aggressive and misogynistic tweets.\\n\\nInternationally, over 200,000 aggressive tweets using the same terms were sent to 80,000 people in the same three weeks.\\n\\nUsing sophisticated in-house technology, Demos built algorithms to separate tweets being used in explicitly aggressive ways, instances of self-identification, and those that were more conversational in tone or commenting on issues related to misogyny (ie. referring to \\u2018slut shaming\\u2019, \\u2018slut walks\\u2019).\\n\\nThe study builds on Demos\\u2019 previous research in 2014, which found that \\u2018slut\\u2019 and \\u2018whore\\u2019 dominate misogynistic language on Twitter, and that both male and female users are responsible for the abuse. In this 2016 research, 50 per cent of the propagators were found to be women.\\n\\nGrowing public concern and political recognition of the extent and impact of hate speech and abuse on social media, particularly faced by women, has given rise to the #ReclaimTheInternet movement, which campaigns to support female participation in social media.\",\"incidentdate\":\"2016-04-26 23:57:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444702\",\"locationname\":\"London, UK\",\"locationlatitude\":\"51.507351\",\"locationlongitude\":\"-0.127758\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":40,\"title\":\"Twitter\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}},{\"category\":{\"id\":63,\"title\":\"31-45\"}}],\"media\":[{\"id\":3565371,\"type\":4,\"link\":\"http:\\/\\/www.demos.co.uk\\/press-release\\/staggering-scale-of-social-media-misogyny-mapped-in-new-demos-study\\/\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"687\",\"incidenttitle\":\"India: plans to install panic buttons in all cell phones\",\"incidentdescription\":\"India's telecommunications ministry has said all mobile phones sold in the country from 2017 must include a panic button.\\n\\nIt is part of a wider campaign to enhance the safety of women, in the light of growing concerns about levels of sexual violence in the country.\\n\\nRavi Shankar Prasad, Minister of Communications and Information Technology, said: \\\"Technology is solely meant to make human life better and what better than using it for the security of women?\\\"\\n\\nThe National Crime Records Bureau said there were 337,922 reports of violence against women, including rape, molestation, abduction and cruelty in 2014, including 36,000 rapes, a rise of 9% on the previous year's figures.\\n\\n\\nIt is not yet clear how the panic button system will work but it is likely to allow customers to call the emergency services by either pressing a single button or by pressing the power button several times in succession.\",\"incidentdate\":\"2016-04-26 00:36:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444703\",\"locationname\":\"New Delhi, Delhi 110001, India\",\"locationlatitude\":\"28.613939\",\"locationlongitude\":\"77.209021\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":16,\"title\":\"Threats of violence\\/blackmail\"}},{\"category\":{\"id\":20,\"title\":\"Physical harm\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":25,\"title\":\"Sexual harm\"}},{\"category\":{\"id\":36,\"title\":\"Mobile phone\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}},{\"category\":{\"id\":63,\"title\":\"31-45\"}}],\"media\":[{\"id\":3565372,\"type\":4,\"link\":\"http:\\/\\/www.bbc.com\\/news\\/technology-36139985\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"685\",\"incidenttitle\":\"Espa\\u00f1a: sostienen que videojuego refuerza machismo en adolescentes\",\"incidentdescription\":\"Un estudio realizado con adolescentes varones comprueba que sus sentimientos machistas aumentan luego de jugar durante media hora a Grand Theft Auto (GTA). \\n\\nLa Universidad de Ohio realiz\\u00f3 una investigaci\\u00f3n  con 154 j\\u00f3venes (hombres y mujeres) de entre 15 y 20 a\\u00f1os, a los que aleatoriamente se les pone a jugar a videojuegos. Las opciones eran el GTA como muestra de juego violento y sexista, el Half Life representando solo la violencia y el Pinball 3D como neutral. Los investigadores buscaban retratar tres reacciones: la identificaci\\u00f3n con el personaje del juego, la aparici\\u00f3n de ideas machistas y la empat\\u00eda hacia la violencia contra la mujer. Despu\\u00e9s de media hora jugando, a los adolescentes se les ense\\u00f1aba una fotograf\\u00eda de una chica que hab\\u00eda sido abusada f\\u00edsicamente por un adolescente.  \\n\\nLos resultados revelan que los jugadores varones que utilizaron el GTA reportaron niveles m\\u00e1s bajos de compasi\\u00f3n, comparados con aquellos que utilizaron el Half Life y Pinball, cuando se les mostr\\u00f3 esa imagen.\\n\\n \\\"La mayor\\u00eda de las personas que vieran una foto as\\u00ed dir\\u00edan que la chica tendr\\u00eda que estar aterrorizada. Pero los chicos que se identificaron mucho con sus caracteres en el juego sexista y violento no sent\\u00edan esa empat\\u00eda por la v\\u00edctima\\\", analiza Brad Bushman, coautor del estudio citado.\",\"incidentdate\":\"2016-04-20 23:34:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444701\",\"locationname\":\"Madrid, Madrid, Spain\",\"locationlatitude\":\"40.416775\",\"locationlongitude\":\"-3.70379\"},\"categories\":[{\"category\":{\"id\":46,\"title\":\"Other\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565369,\"type\":4,\"link\":\"http:\\/\\/tecnologia.elpais.com\\/tecnologia\\/2016\\/04\\/13\\/actualidad\\/1460566371_922647.html\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"681\",\"incidenttitle\":\"Pakistan: cyber harassment is a serious problem\",\"incidentdescription\":\"While Pakistan\\u2019s women may being seeing some success in their fight for empowerment offline, there is a crucial battle that has to be won online as well. The misogyny and hypocrisy of Pakistan\\u2019s men becomes more prominent when hiding behind a computer; cyber harassment is a serious problem in Pakistan.\\n\\nHere, cyber harassment is meant to include a variety of online actions: cyber stalking, bullying, trolling, intimidation, blackmail, extortion, revenge porn, and the invasion of privacy. Side by side with \\u201creal-world\\u201d violence, there is technology-related violence against women (VAW) as well \\u2014 and it\\u2019s now growing to epidemic proportions.\\n\\nCultural norms and the idea of \\u201chonor\\u201d may be a reason for victims not to seek help and report harassment. But on a more basic level, there is is simply a lack of awareness and education about cyber harassment. Victims generally do not know how to seek help and where they can report the issue. Hence it remains a highly under-reported offense.\",\"incidentdate\":\"2016-04-16 23:02:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444697\",\"locationname\":\"Lahore, Pakistan\",\"locationlatitude\":\"31.554606\",\"locationlongitude\":\"74.357158\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":42,\"title\":\"Online chats (e.g. Skype, IM)\"}},{\"category\":{\"id\":44,\"title\":\"Email\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":50,\"title\":\"A group of people\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}}],\"media\":[{\"id\":3565365,\"type\":4,\"link\":\"http:\\/\\/thediplomat.com\\/2016\\/04\\/the-cyber-harassment-of-pakistans-women\\/\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"671\",\"incidenttitle\":\"UK: Police and tech firms should use their resources to stop trolling\",\"incidentdescription\":\"Labour MP Stella Creasy, who was a victim of online abuse, considers that police and tech companies have to use their resources in order to stop trolling. \\n\\n\\\"Trolling is still not being taken seriously enough by police and technology companies who already have the tools to take action against internet abusers\\\", the Labour MP Stella Creasy has said.\\n\\nCreasy, who was targeted three years ago by one of the most high-profile Twitter trolls to be jailed, said the key to dealing with online abuse was challenging the underlying inequality, misogyny and prejudice that fuels the problem.\\n\\nBut she also raised concerns that the authorities and internet firms are still not treating online crimes in the same way as they would do offline or realising that trolling amounts to harassment.\\n\\nThe senior Tory MP Maria Miller earlier this week called for an overhaul of internet legislation to stop online abuse, warning that it may be creating a \\u201cnightmare\\u201d for society in future.\",\"incidentdate\":\"2016-04-15 17:42:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444687\",\"locationname\":\"London, UK\",\"locationlatitude\":\"51.507351\",\"locationlongitude\":\"-0.127758\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":40,\"title\":\"Twitter\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}},{\"category\":{\"id\":29,\"title\":\"Reported to police\\/state enforcement authority\"}},{\"category\":{\"id\":63,\"title\":\"31-45\"}}],\"media\":[{\"id\":3565353,\"type\":4,\"link\":\"https:\\/\\/www.theguardian.com\\/technology\\/2016\\/apr\\/15\\/online-trolling-not-taken-seriously-enough-labour-stella-creasy\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"680\",\"incidenttitle\":\"UK: Social networks critized for not doing enough against gender violence\",\"incidentdescription\":\"Facebook, Twitter, and Google are consulting with women\\u2019s groups around the world in a bid to organise a \\u201cfight back\\u201d against online harassment.\\n\\nIt is understood that the plans involve fostering a \\u201ccounter-speech\\u201d movement, which would challenge misogyny, racism and threats of violence. This movement would be facilitated by the tech companies involved, but not led by them.\\n\\nHowever, the move \\u2013 first reported by the Guardian \\u2013 has already been criticised by some groups who see it as technology companies abdicating responsibility for what occurs on their platforms.\\n\\nSarah Green, of the End Violence against Women Coalition, told the Guardian that although any changes by technology companies were welcome, it \\u201ccan\\u2019t [be] the whole answer \\u2013 we wouldn\\u2019t say that harassment and assault of women in the street should simply be dealt with by victims fighting back\\u201d.\",\"incidentdate\":\"2016-04-11 22:51:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444696\",\"locationname\":\"London, UK\",\"locationlatitude\":\"51.507351\",\"locationlongitude\":\"-0.127758\"},\"categories\":[{\"category\":{\"id\":15,\"title\":\"Repeated harassment\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":40,\"title\":\"Twitter\"}},{\"category\":{\"id\":41,\"title\":\"YouTube\"}},{\"category\":{\"id\":39,\"title\":\"Other social networks\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":49,\"title\":\"Someone unknown\"}}],\"media\":[{\"id\":3565364,\"type\":4,\"link\":\"http:\\/\\/www.itpro.co.uk\\/strategy\\/26332\\/facebook-criticised-over-online-harassment-project\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"679\",\"incidenttitle\":\"Social media and teen sex abuse\",\"incidentdescription\":\"when this 13-year-old girl and her boyfriend break up, he doesn\\u2019t just tell a lie to his friends. He hops online and tweets that she gave him oral sex. He calls her a slut. And his sexually aggressive cyberbullying is shared over and over again. When that little girl checks her phone, boys she barely knows are asking her for nude pictures.\\n\\nThis is the type of hard truths journalist Nancy Jo Sales explored for more than two years as she talked to more than 200 teen girls across the country. She wrote a book, \\u201cAmerican Girls: Social Media and the Secret Lives of Teenagers.\\u201d\",\"incidentdate\":\"2016-04-10 22:46:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444695\",\"locationname\":\"Kansas City, MO, USA\",\"locationlatitude\":\"39.099727\",\"locationlongitude\":\"-94.578567\"},\"categories\":[{\"category\":{\"id\":18,\"title\":\"Sharing  and\\/or disseminating private information\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":119,\"title\":\"Invasion of privacy\"}},{\"category\":{\"id\":38,\"title\":\"Facebook\"}},{\"category\":{\"id\":41,\"title\":\"YouTube\"}},{\"category\":{\"id\":39,\"title\":\"Other social networks\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":61,\"title\":\"under 18\"}}],\"media\":[{\"id\":3565363,\"type\":4,\"link\":\"http:\\/\\/www.kansascity.com\\/living\\/liv-columns-blogs\\/jenee-osterheldt\\/article70562582.html#storylink=cpy\",\"thumb\":null}],\"comments\":[]},{\"incident\":{\"incidentid\":\"678\",\"incidenttitle\":\"Tinder: sexism in social networks\",\"incidentdescription\":\"A new study from Manchester University has reached a conclusion in their research that straight male users of Tinder feel let down when a date is not as attractive as they had expected, and thus feel entitled to \\u201cuse [her] as they see fit\\u201d. In short, Tinder is a hotbed of objectification and entitlement based on conventional beauty standards. Now tell us something we don\\u2019t know.\\n\\nThis research and the media\\u2019s reporting of it follow a predictable pattern in the social media age, in which we\\u2019re regularly told that our new favourite app is, in fact, a danger: dating apps are responsible for an increase in STIs; Uber is leaving us all vulnerable to sexual assault; it\\u2019s Snapchat\\u2019s fault that revenge porn is on the rise. If these reports are to be believed, the rise of social media has brought with it a rise in misogyny.\\n\\nThe fact is, though, that while it\\u2019s convenient to blame technology we don\\u2019t fully understand for misogynistic and predatory behaviour, these apps are quite simply new platforms for very old attitudes.\",\"incidentdate\":\"2016-04-08 22:38:00\",\"incidentmode\":\"1\",\"incidentactive\":\"1\",\"incidentverified\":\"1\",\"locationid\":\"10444694\",\"locationname\":\"Manchester, Manchester, UK\",\"locationlatitude\":\"53.480759\",\"locationlongitude\":\"-2.242631\"},\"categories\":[{\"category\":{\"id\":123,\"title\":\"Abusive comments\"}},{\"category\":{\"id\":21,\"title\":\"Emotional harm\"}},{\"category\":{\"id\":24,\"title\":\"Harm to reputation\"}},{\"category\":{\"id\":39,\"title\":\"Other social networks\"}},{\"category\":{\"id\":46,\"title\":\"Other\"}},{\"category\":{\"id\":4,\"title\":\"Trusted Reports\"}},{\"category\":{\"id\":48,\"title\":\"Someone known\"}},{\"category\":{\"id\":62,\"title\":\"18-30\"}}],\"media\":[{\"id\":3565362,\"type\":4,\"link\":\"http:\\/\\/www.theguardian.com\\/commentisfree\\/2016\\/apr\\/08\\/tinder-online-mysogyny-dating-app-sexist\",\"thumb\":null}],\"comments\":[]}]},\"error\":{\"code\":\"0\",\"message\":\"No Error\"}}";

            if (result != null) {
                Log.i("Parsing", "about to start" + result);
                try {
                    //this is the object returned by the API call
                    JSONObject jsonObj = new JSONObject(result);
                    //gets the object with information pertinent to this application
                    JSONObject payload = jsonObj.getJSONObject("payload");
                    //gets the array with the latest 20 reports of cyber-bullying and abuse
                    JSONArray incidents = payload.getJSONArray("incidents");
                    // for loop iterates through the 20 cases, parsing and assigning values
                    for (int i = 0; i < 20; i++) {
                        // gets the i-th incident in array
                        JSONObject first = incidents.getJSONObject(i);
                        //gets the incident object in array position
                        JSONObject incident = first.getJSONObject("incident");
                        //gets and tests the title of the incident
                        String title = incident.getString("incidenttitle");
                        Log.d(TAG, "This is the incident title: " + title);
                        //gets and tests the location for the incident
                        String location = incident.getString("locationname");
                        Log.d(TAG, "This is the incident location: " + location);
                        //gets and tests the latitude and longitude for the location
                        String lat = incident.getString("locationlatitude");
                        String lon = incident.getString("locationlongitude");
                        Log.d(TAG, "This is lon and lat: " + lon + " " + lat);
                        //gets the incident report - I was not able to use because I was not able to do a multiline output in the snippet area
                        //but kept the parsing here for reference in the future
                                // String genInfo = incident.getString("incidentdescription");
                                // String info = genInfo.substring(0, (genInfo.indexOf(".") + 1));
                                // Log.d(TAG, "This is the incident info: " + info);
                        //gets the array of categories from the i-th object in the 'first' array
                        JSONArray categories = first.getJSONArray("categories");
                        //gets the first object in the array of categories
                        JSONObject categoryTitle = categories.getJSONObject(0);
                        //gets the object containing all the categories
                        JSONObject container = categoryTitle.getJSONObject("category");
                        //gets the category for the incident and tests it
                        String category = container.getString("title");
                        Log.d(TAG, "Category: " + category);
                        //loads the marker to the map, with the location's name, latitude, longitude, incident category and brief description
                        LatLng geoLocation = new LatLng(Double.parseDouble(lat), Double.parseDouble(lon));
                        mMap.addMarker(new MarkerOptions().position(geoLocation).title(location + " - Latitude: "  + lat + " - Longitude: " + lon )
                                .snippet(category + " in " + title));
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            } else {
                Log.e("ServiceHandler", "Couldn't get any data from the url");
            }
        }
    }
    @Override
    /**
     * onSaveInstanceState method - sends into the bundle the state of
     * variables .Initial use was to keep the Toast that shows up at launch
     * from appearing each time the screen rotates.
     *
     */
    public void onSaveInstanceState(Bundle outState) {
        Log.d(TAG, "in onSaveInstanceState");
        outState.putBoolean("infoDisplayed", infoDisplayed);
        super.onSaveInstanceState(outState);
    }

    /**
     * onRestoreInstanceState method - keeps the Toast displayed at launch from appearing
     *when the screen is rotated
     * @param inState - the Bundle object received with the variables' states.
     */
    public void onRestoreInstanceState(Bundle inState)
    {
        super.onRestoreInstanceState(inState);
       infoDisplayed = inState.getBoolean("infoDisplayed");

    }
}
